{"version":3,"sources":["StreamlitLottie.tsx","index.tsx"],"names":["withStreamlitConnection","props","lottieElementRef","useRef","lottieInstanceRef","args","animationData","speed","direction","loop","quality","renderer","height","width","useEffect","current","lottie","loadAnimation","container","autoplay","setSubframe","addEventListener","Streamlit","setFrameHeight","removeEventListener","destroy","undefined","setQuality","Number","isNaN","setSpeed","setDirection","style","ref","console","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"oOA8FeA,eA3ES,SAACC,GACvB,IAAMC,EAAmBC,iBAAuB,MAC1CC,EAAoBD,mBAFuB,EAajCF,EAAMI,KARpBC,EAL+C,EAK/CA,cACAC,EAN+C,EAM/CA,MACAC,EAP+C,EAO/CA,UACAC,EAR+C,EAQ/CA,KACAC,EAT+C,EAS/CA,QACAC,EAV+C,EAU/CA,SACAC,EAX+C,EAW/CA,OACAC,EAZ+C,EAY/CA,MAqDF,OAlDAC,qBAAU,WACR,GAAI,OAASZ,EAAiBa,QAsB9B,OAlBAX,EAAkBW,QAAUC,IAAOC,cAAc,CAC/CC,UAAWhB,EAAiBa,QAC5BJ,SAAUA,EACVF,KAAMA,EACNU,UAAU,EACVb,cAAeA,IAEjBF,EAAkBW,QAAQK,aAAY,GAEtChB,EAAkBW,QAAQM,iBAAiB,aAAa,WACtDC,IAAUC,oBAQL,WACAnB,EAAkBW,UAGvBX,EAAkBW,QAAQS,oBAAoB,aAE9CpB,EAAkBW,QAAQU,UAC1BrB,EAAkBW,aAAUW,MAE7B,CAACpB,EAAeG,EAAME,IAEzBG,qBAAU,WACHV,EAAkBW,SACvBC,IAAOW,WAAWjB,KACjB,CAACA,IAEJI,qBAAU,WACHV,EAAkBW,UACnBa,OAAOC,MAAMtB,IACjBH,EAAkBW,QAAQe,SAASvB,MAClC,CAACA,IAEJO,qBAAU,WACHV,EAAkBW,SACvBX,EAAkBW,QAAQgB,aAAavB,KACtC,CAACA,IAGF,oCACE,yBACEwB,MAAO,CAAEnB,MAAOA,GAAS,OAAQD,OAAQA,GAAU,QACnDqB,IAAK/B,IAENgC,QAAQC,IAAI,c,MCpFnBC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.cacf8e52.chunk.js","sourcesContent":["import {\r\n  Streamlit,\r\n  ComponentProps,\r\n  withStreamlitConnection,\r\n} from \"streamlit-component-lib\"\r\nimport React, { useEffect, useRef } from \"react\"\r\nimport lottie, { AnimationItem } from \"lottie-web\"\r\n\r\ninterface PythonArgs {\r\n  animationData: any\r\n  loop: boolean | number\r\n  speed: number\r\n  direction: 1 | -1\r\n  quality: \"high\" | \"medium\" | \"low\"\r\n  renderer: \"svg\" | \"canvas\"\r\n  height?: number\r\n  width?: number\r\n}\r\n\r\nconst StreamlitLottie = (props: ComponentProps) => {\r\n  const lottieElementRef = useRef<HTMLDivElement>(null)\r\n  const lottieInstanceRef = useRef<AnimationItem>()\r\n\r\n  const {\r\n    animationData,\r\n    speed,\r\n    direction,\r\n    loop,\r\n    quality,\r\n    renderer,\r\n    height,\r\n    width,\r\n  }: PythonArgs = props.args\r\n\r\n  useEffect(() => {\r\n    if (null === lottieElementRef.current) {\r\n      return\r\n    }\r\n\r\n    lottieInstanceRef.current = lottie.loadAnimation({\r\n      container: lottieElementRef.current,\r\n      renderer: renderer,\r\n      loop: loop,\r\n      autoplay: true,\r\n      animationData: animationData,\r\n    })\r\n    lottieInstanceRef.current.setSubframe(false)\r\n\r\n    lottieInstanceRef.current.addEventListener(\"DOMLoaded\", () => {\r\n      Streamlit.setFrameHeight()\r\n    })\r\n    /*\r\n    lottieInstanceRef.current.addEventListener(\"complete\", () => {\r\n      Streamlit.setComponentValue(true)\r\n    })\r\n    */\r\n\r\n    return () => {\r\n      if (!lottieInstanceRef.current) {\r\n        return\r\n      }\r\n      lottieInstanceRef.current.removeEventListener(\"DOMLoaded\")\r\n      // lottieInstanceRef.current.removeEventListener(\"complete\")\r\n      lottieInstanceRef.current.destroy()\r\n      lottieInstanceRef.current = undefined\r\n    }\r\n  }, [animationData, loop, renderer])\r\n\r\n  useEffect(() => {\r\n    if (!lottieInstanceRef.current) return\r\n    lottie.setQuality(quality)\r\n  }, [quality])\r\n\r\n  useEffect(() => {\r\n    if (!lottieInstanceRef.current) return\r\n    if (Number.isNaN(speed)) return\r\n    lottieInstanceRef.current.setSpeed(speed)\r\n  }, [speed])\r\n\r\n  useEffect(() => {\r\n    if (!lottieInstanceRef.current) return\r\n    lottieInstanceRef.current.setDirection(direction)\r\n  }, [direction])\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ width: width || \"100%\", height: height || \"100%\" }}\r\n        ref={lottieElementRef}\r\n      ></div>\r\n      {console.log(\"Render\")}\r\n    </>\r\n  )\r\n}\r\nexport default withStreamlitConnection(StreamlitLottie)\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport StreamlitLottie from \"./StreamlitLottie\"\r\n\r\nimport \"./index.css\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <StreamlitLottie />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)\r\n"],"sourceRoot":""}